<head>
  <link rel="stylesheet" href="/assets/styles/result.css">
</head>
<body class="result-background">
<h1>æ¡ç‚¹çµæœ</h1>
  <!-- æ¡ç‚¹çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
  <div id="resultCard" class="result-card">
    <div id="resultDisplay"></div>
    <div id="resultIcon" class="result-icon"></div>
    <div id="resultImage" class="result-image"></div>
  </div>
  <button onclick="restart()">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹</button>

  <script>
    // localStorageã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
    const data = localStorage.getItem("aiueoData");
    if (data) {
      const formData = JSON.parse(data);
      console.log(formData);
      const topic = formData.topic;
      const inputs = formData.inputs;

      const resultDiv = document.getElementById("resultDisplay");

      // ãŠé¡Œã®è¡¨ç¤º
      resultDiv.innerHTML = "<p>ãŠé¡Œ: " + topic + "</p>";

      // ä½œæˆã—ãŸæ–‡ç« ã®è¡¨ç¤ºï¼ˆä¾‹ã¨ã—ã¦ã€å„æ–‡å­—ã¨å…¥åŠ›å†…å®¹ã‚’è¡¨ç¤ºï¼‰
      resultDiv.innerHTML += "<h2>ã‚ãªãŸã®ä½œæ–‡</h2>";
      for (let i = 0; i < inputs.length; i++) {
        resultDiv.innerHTML += "<p>" + topic[i] + "ï¼š " + inputs[i] + "</p>";
      }

      // æ¡ç‚¹çµæœã®è¡¨ç¤ºï¼ˆã“ã“ã§ã¯ãƒ©ãƒ³ãƒ€ãƒ ãªç‚¹æ•°ã‚’ä¾‹ç¤ºï¼‰
      const score = Math.floor(Math.random() * 101);  // 0ï½100ç‚¹ã®ãƒ©ãƒ³ãƒ€ãƒ ãªç‚¹æ•°
      resultDiv.innerHTML += "<h2>ç‚¹æ•°: " + score + "ç‚¹</h2>";

      // ç‚¹æ•°ã«å¿œã˜ãŸã‚¢ã‚¤ã‚³ãƒ³ã¨èƒŒæ™¯ã‚¤ãƒ©ã‚¹ãƒˆã®è¡¨ç¤º
      const resultIconDiv = document.getElementById("resultIcon");
      const resultImageDiv = document.getElementById("resultImage");
      if (score >= 70) {
        resultIconDiv.innerHTML = "ğŸ˜Š";  // äººé–“ã®ãƒãƒ¼ã‚¯
        resultImageDiv.innerHTML = '<img src="/assets/images/human.png" alt="é«˜å¾—ç‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸">';
        resultImageDiv.innerHTML += '<img src="/assets/images/congratulations.png" alt="ãŠã‚ã§ã¨ã†ã‚¤ãƒ©ã‚¹ãƒˆ">';
      } else if (score <= 40) {
        resultIconDiv.innerHTML = "ğŸ¤–";  // AIã®ãƒãƒ¼ã‚¯
        resultImageDiv.innerHTML = '<img src="/assets/images/ai.png" alt="ä½å¾—ç‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸">';
        resultImageDiv.innerHTML += '<img src="/assets/images/sorry.png" alt="æ®‹å¿µã‚¤ãƒ©ã‚¹ãƒˆ">';
      } else {
        resultIconDiv.innerHTML = "ğŸ˜";  // ä¸­é–“ã®ãƒãƒ¼ã‚¯
      }

    } else {
      document.getElementById("resultDisplay").innerHTML = "<p>ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚</p>";
    }

    // ã€Œã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹ã€ãƒœã‚¿ãƒ³æŠ¼ä¸‹æ™‚ã®å‡¦ç†
    function restart() {
      localStorage.removeItem("aiueoData");
      window.location.href = "input"
    
    }
  </script>
  
<%- contentFor("css") %>
<link rel="stylesheet" href="/styles/result.css">
</body>